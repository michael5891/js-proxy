{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/logging-utils.ts","webpack:///./src/generics.ts","webpack:///./src/proxy_handlers/base.ts","webpack:///./src/filters/index.ts","webpack:///./src/filters/angular.filter.ts","webpack:///./src/filters/native-quirks.filter.ts","webpack:///./src/proxy_handlers/promise.ts","webpack:///./src/proxy_handlers/object.ts","webpack:///./src/proxy_handlers/injector.ts","webpack:///./src/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","defaultLogger","msg","args","console","error","LoggingUtils","template","result","slice","forEach","arg","idx","split","join","element","toString","JSON","stringify","isNativeFunctionCall","isFunction","test","isNativeTypeCall","Boolean","isSymbol","bindFn","target","prop","Error","arguments","GetMissingPropertyMsg","logTemplate","SetMissingPropertyMsg","GetMissingServiceMsg","CallMissingMethodMsg","PROXY_TAG","proxyFn","fn","__proxy_fn__","this","isProxified","defaultPropsFilter","propName","startsWith","angularFilter","nativeQuirksFilter","isPromiseNative","obj","Promise","isPromise","then","isPromisePolyfill","super","scope","response","proxify","subject","Proxy","propsFilter","onGetMissingProperty","onSetMissingProperty","onCallMissingMethod","receiver","keyFor","bindSymbol","thisArg","argsList","thisArgStr","apply","filter","__proxy_target__","injector","onGetMissingService","serviceProxyHandler","service","err","InjectionProxy","options","ObjectProxy"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * Enable in dev/monitor mode for debug,\n * consider feature flag support.\n * (dont commit while log enabled, unit test provided)\n */\nexport function devLog(msg: any, ...args: any[]) {\n  // console.log('[ScarecrowProxy] ', msg, ...args);\n}\n\nexport function defaultLogger(msg: any, ...args: any[]) {\n  console.error('[ScarecrowProxy] ', msg, ...args);\n}\n\nexport function stringify(element) {\n  if (typeof element === 'symbol') return element.toString();\n\n  if (element instanceof Object) return JSON.stringify(element);\n\n  return element; // primitive\n}\n\nexport class LoggingUtils {\n  static GetMissingPropertyMsg = LoggingUtils.logTemplate('Getting non-existing property \"{0}\"');\n  static SetMissingPropertyMsg = LoggingUtils.logTemplate('Setting non-existing property \"{0}\", value: \"{1}\"');\n  static GetMissingServiceMsg = LoggingUtils.logTemplate('Getting non-existing service \"{0}\"');\n  static CallMissingMethodMsg = LoggingUtils.logTemplate('Executing non-existing method: \"{0}\" on this: {1} with arguments: {2}');\n\n  static logTemplate(template: string) {\n    return (...args: any[]) => {\n      let result = template.slice(0); // clone\n\n      args.forEach((arg, idx) => {\n        // in case of symbol or proxy, primitive conversion will fail.\n        result = result.split(`{${idx}}`).join(stringify(arg));\n      });\n\n      return result;\n    };\n  }\n}\n","/**\n * Ignore native code as fn.call or native object flows as Map.forEach\n */\nexport function isNativeCodeProperty(value: { toString }) {\n  if (!value) return false;\n\n  return isNativeFunctionCall(value) || isNativeTypeCall(value);\n}\n\nexport function isNativeFunctionCall(value: { toString }) {\n  if (!value) return false;\n\n  return isFunction(value) && /\\[native code]/.test(value.toString());\n}\n\nexport function isNativeTypeCall(value: { toString }) {\n  if (!value) return false;\n\n  return !isFunction(value) && Boolean(value[Symbol.toStringTag]);\n}\n\nexport function isFunction(value) {\n  return typeof value === 'function';\n}\n\nexport function isSymbol(value) {\n  return typeof value === 'symbol';\n}\n\nexport function bindFn(target, prop) {\n  if (!(isFunction(target[prop]) || isSymbol(prop))) throw new Error(`None function binding: ${arguments}`);\n\n  return target[prop].bind(target);\n}\n\nexport function bindSymbol(target, prop) {\n  /**\n   * Used to resolve the\n   * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n   * Object.prototype.toString in es5 will call by Symbol.toStringTag, must make sure target has it or use function.\n   */\n  if (prop === Symbol.toStringTag) {\n    return target[Symbol.toStringTag] ? bindFn(target, prop) : bindFn(target, 'toString');\n  }\n\n  // Encountered in tests mode by jest.\n  if (Symbol.keyFor(prop) === 'nodejs.util.inspect.custom') {\n    return; // the symbol doesnt exist on the target\n  }\n\n  return bindFn(target, prop);\n}\n\n","import {isNativeTypeCall} from \"../generics\";\n\nexport const PROXY_TAG = '__proxy__';\n\nexport function proxyFn(name: any = 'proxyFn') {\n    const fn = function proxyFn() {};\n\n    fn.__proxy_fn__ = name;\n\n    return fn;\n}\n\nexport function isProxyFn(subject: any) {\n    return '__proxy_fn__' in subject;\n}\n\nexport class BaseProxyHandler {\n    has(target, key) {\n        if (key === PROXY_TAG) {\n            return true;\n        }\n\n        return key in target;\n    }\n\n    protected proxify(target: any = proxyFn(), name = null) {\n        return name ? target[name] : target;\n    }\n\n    isProxified(target) {\n        return (PROXY_TAG in target);\n    }\n\n    filter(target: any) {\n        // Primitives\n        if (!(target && target instanceof Object)) {\n            return true;\n        }\n\n        // Filter native Types access (Map, Array, Date...)\n        if (isNativeTypeCall(target)) {\n            return true;\n        }\n\n        // Already proxified\n        return this.isProxified(target);\n    }\n}\n","import { angularFilter } from \"./angular.filter\";\nimport { nativeQuirksFilter } from \"./native-quirks.filter\";\n\nexport { angularFilter };\nexport { nativeQuirksFilter };\n\nexport function defaultPropsFilter(propName: string) {\n    return angularFilter(propName) || nativeQuirksFilter(propName);\n}\n","export function angularFilter(propName: string) {\n    return propName && propName.startsWith('$');\n}\n","export function nativeQuirksFilter(propName: string) {\n    // - toJSON called by json stringify as api for custom override.\n    // - constructor is been used in some js packages (edge cases)\n    return propName === 'toJSON' || propName === 'constructor';\n}\n","import {BaseProxyHandler, proxyFn} from \"./base\";\nimport {bindFn} from \"../generics\";\nimport {ObjectProxyHandler} from \"./object\";\n\n/**\n * None es6 promise polyfill as bluebird will have a simple 'then' function.\n */\nexport function isPromisePolyfill(obj) {\n    return obj && typeof obj.then === 'function';\n}\n\n/**\n * Native es6\n */\nexport function isPromiseNative(obj) {\n    return obj instanceof Promise;\n}\n\nexport function isPromise(obj) {\n    return isPromiseNative(obj) || isPromisePolyfill(obj);\n}\n\nexport class PromiseProxyHandler extends BaseProxyHandler {\n    constructor() {\n        super();\n    }\n\n    get(target, prop) {\n        let scope = target;\n        const value = target[prop];\n\n        if (prop === 'then') {\n            scope = target.then(response => this.proxify(response));\n        }\n\n        return typeof value === 'function' ? bindFn(scope, prop) : value;\n    }\n\n    protected proxify(target: any = proxyFn(), name = null) {\n        const subject = super.proxify(target, name);\n\n        if (isPromise(subject)) {\n            return new Proxy(subject, new PromiseProxyHandler());\n        }\n\n        if (this.isProxified(subject)) {\n            return subject;\n        }\n\n        // TODO: new object proxy handler should receive logging call backs\n        return new Proxy(subject, new ObjectProxyHandler());\n    }\n}\n","import { defaultPropsFilter } from \"../filters\";\nimport {isPromise, isPromiseNative, PromiseProxyHandler} from \"./promise\";\nimport {defaultLogger, devLog, LoggingUtils} from \"../logging-utils\";\nimport {BaseProxyHandler, isProxyFn, proxyFn} from \"./base\";\nimport {bindFn, bindSymbol, isNativeFunctionCall, isNativeTypeCall, isSymbol} from \"../generics\";\nimport {IObjectProxyHandlerOptions} from \"./object.interface\";\n\nconst {\n    GetMissingPropertyMsg,\n    SetMissingPropertyMsg,\n    CallMissingMethodMsg,\n} = LoggingUtils;\n\nexport class ObjectProxyHandler extends BaseProxyHandler {\n    readonly propsFilter: (name: string | any) => boolean;\n\n    readonly onGetMissingProperty: (msg: string, name: string) => void;\n\n    readonly onSetMissingProperty: (msg: string, name: string, value: any) => void;\n\n    readonly onCallMissingMethod: (msg: string, thisArg: any, args: any[]) => void;\n\n    constructor({\n                    propsFilter = defaultPropsFilter,\n                    onGetMissingProperty = defaultLogger,\n                    onSetMissingProperty = defaultLogger,\n                    onCallMissingMethod = defaultLogger,\n                }: IObjectProxyHandlerOptions = {}) {\n        super();\n        this.propsFilter = propsFilter;\n        this.onGetMissingProperty = onGetMissingProperty;\n        this.onSetMissingProperty = onSetMissingProperty;\n        this.onCallMissingMethod = onCallMissingMethod;\n    }\n\n    get(target: {}, name: string | number | symbol, receiver: any = null): any {\n        devLog('[ServiceProxyHandler] Get', name, typeof name);\n\n        if (name === '__proxy_target__') {\n            return target;\n        }\n\n        if (isSymbol(name)) {\n            return bindSymbol(target, name);\n        }\n\n        if (this.propsFilter(name.toString()) || (name === 'then' && !isPromiseNative(target))) {\n            return target[name];\n        }\n\n        if (name in target) {\n            return this.proxify(target, name);\n        }\n\n        this.onGetMissingProperty(GetMissingPropertyMsg(name), name.toString());\n\n        return this.proxify(proxyFn(name));\n    }\n\n    set(target: {}, name: string | number | symbol, value: any): boolean {\n        devLog('[ServiceProxyHandler] Set', target, name, value);\n\n        if (!(name in target || this.propsFilter(name.toString()))) {\n            const msg = SetMissingPropertyMsg(name, value);\n\n            this.onSetMissingProperty(msg, name.toString(), value);\n        }\n\n        (<any>target)[name] = value;\n\n        return true;\n    }\n\n    apply(target: Function, thisArg: any, argsList: any[]): any {\n        devLog('[ServiceProxyHandler] Apply', target, thisArg, argsList);\n\n        if (isProxyFn(target)) {\n            const thisArgStr = this.stringify(thisArg);\n            // eslint-disable-next-line dot-notation\n            const msg = CallMissingMethodMsg(target['__proxy_fn__'], thisArgStr, argsList);\n\n            this.onCallMissingMethod(msg, thisArgStr, argsList);\n\n            return this.proxify();\n        }\n\n        return this.proxify(target.apply(thisArg, argsList));\n    }\n\n    protected proxify(target: any = proxyFn(), name = null) {\n        const subject = super.proxify(target, name);\n\n        if (isPromise(subject)) {\n            return new Proxy(subject, new PromiseProxyHandler());\n        }\n\n        if(this.filter(subject)) {\n            return subject;\n        }\n\n        // Don't proxify native function calls (as fn.call, Promise.then...)\n        if (isNativeFunctionCall(subject)) {\n            return bindFn(target, name);\n        }\n\n        return new Proxy(subject, this);\n    }\n\n    protected stringify(target) {\n        if (target && target.__proxy_target__) {\n            return JSON.stringify(target.__proxy_target__) || target.__proxy_target__.toString();\n        }\n    }\n}\n","import { LoggingUtils, defaultLogger, devLog } from \"../logging-utils\";\nimport {BaseProxyHandler, proxyFn} from \"./base\";\nimport {ObjectProxyHandler} from \"./object\";\nimport {IInjectorProxyHandlerOptions, IObjectProxyHandlerOptions} from \"./object.interface\";\n\nconst { GetMissingServiceMsg } = LoggingUtils;\n\nexport class InjectorProxyHandler extends BaseProxyHandler {\n    readonly injector: (name: string | number | symbol) => any;\n\n    readonly onGetMissingService: (msg: string, name: string | number | symbol) => void;\n\n    readonly serviceProxyHandler: ObjectProxyHandler;\n\n    /***\n     * @param injector(name: string | number | symbol): any;\n     * @param onGetMissingService?(msg: string, name: string | number | symbol): void;\n     * @param propsFilter?(name: string): boolean;\n     * @param onGetMissingProperty?(msg: string, ...args: any[]): void;\n     * @param onSetMissingProperty?(msg: string, ...args: any[]): void;\n     * @param onCallMissingMethod?(msg: string, ...args: any[]): void;\n     */\n    constructor({ injector, onGetMissingService = defaultLogger }: IInjectorProxyHandlerOptions) {\n        super();\n        this.injector = injector;\n        this.onGetMissingService = onGetMissingService;\n        this.serviceProxyHandler = new ObjectProxyHandler(arguments[0] as IObjectProxyHandlerOptions);\n    }\n\n    get(target: {}, name: string | number | symbol): any {\n        devLog('[InjectorProxyHandler] Get', target, name);\n\n        if (name === Symbol.toStringTag) return target.toString();\n\n        if (name in target) return (<any>target)[name];\n\n        let service = null;\n\n        try {\n            service = this.injector(name);\n        } catch (err) {}\n\n        if (!service) {\n            this.onGetMissingService(GetMissingServiceMsg(name), name);\n        }\n\n        (<any>target)[name] = this.proxify(service || proxyFn(name));\n\n        return (<any>target)[name];\n    }\n\n    proxify(target: any = proxyFn()) {\n        return new Proxy(target, this.serviceProxyHandler);\n    }\n}\n","/**\n * This lib provides 3 layers of proxy decoration,\n * 1) services invocation by name, by the provided injector.\n * 2) provided service/object interface.\n * 3) Promise object.\n *\n * All layers are Proxy wrapped to avoid fatal exceptions on non existing misuse\n * or application out of sync in case of multi iframe shared services / resources.\n */\nimport {InjectorProxyHandler} from './proxy_handlers/injector';\nimport {IInjectorProxyHandlerOptions, IObjectProxyHandlerOptions} from \"./proxy_handlers/object.interface\";\nimport {ObjectProxyHandler} from \"./proxy_handlers/object\";\n\nexport function InjectionProxy(options: IInjectorProxyHandlerOptions): {} {\n  return new Proxy({}, new InjectorProxyHandler(options));\n}\n\nexport function ObjectProxy(target: any, options: IObjectProxyHandlerOptions): {} {\n  return new Proxy(target, new ObjectProxyHandler(options));\n}\n"],"sourceRoot":""}